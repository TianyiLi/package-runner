# Package Runner - 產品需求文檔 (PRD)

## 產品概述

### 產品名稱
Package Runner

### 產品定位
一個專為開發者設計的統一專案管理工具，提供儲存庫管理、腳本執行、環境變數配置等功能，幫助開發者高效管理多個開發專案。

### 目標用戶
- 前端開發者
- 全端開發者
- DevOps 工程師
- 需要管理多個專案的開發團隊

## 核心功能需求

### 1. 儲存庫管理
**優先級：** 高

**功能描述：**
- 管理多個開發專案儲存庫
- 自動檢測專案類型（Vite、Next.js、React、Node.js）
- 自動識別包管理器（npm、pnpm、yarn、bun）
- 記錄最後存取時間，提供快速存取功能

**具體需求：**
- [x] 新增儲存庫 - 支援手動添加或自動掃描
- [x] 刪除儲存庫 - 提供安全刪除確認
- [x] 編輯儲存庫資訊 - 允許修改名稱、路徑等基本資訊
- [x] 儲存庫列表 - 支援搜尋、篩選、排序功能
- [x] 專案類型自動檢測 - 基於配置文件自動識別
- [x] 最近使用記錄 - 顯示最近存取的儲存庫

### 2. 腳本管理與執行
**優先級：** 高

**功能描述：**
- 管理和執行 package.json 中的腳本
- 支援自訂腳本命令
- 即時顯示腳本執行狀態和輸出
- 支援腳本停止和重啟功能

**具體需求：**
- [x] 腳本列表 - 顯示所有可用腳本
- [x] 腳本執行 - 一鍵執行腳本
- [x] 腳本停止 - 強制停止運行中的腳本
- [x] 即時輸出 - 顯示腳本執行的即時日誌
- [x] 執行狀態 - 顯示腳本運行狀態（運行中、已停止、錯誤）
- [x] 自訂腳本 - 允許用戶添加自訂腳本命令
- [x] 腳本參數 - 支援傳遞命令行參數
- [x] 環境變數注入 - 在腳本執行時注入環境變數

### 3. 環境變數管理
**優先級：** 高

**功能描述：**
- 管理專案的環境變數
- 支援敏感資訊隱藏
- 提供 .env 文件生成和匯入功能
- 支援多環境配置

**具體需求：**
- [x] 環境變數增刪改查 - 完整的 CRUD 操作
- [x] 敏感資訊保護 - 密碼、API 金鑰等敏感資訊遮蔽顯示
- [x] .env 文件生成 - 將環境變數匯出為 .env 文件
- [x] .env 文件匯入 - 從 .env 文件匯入環境變數
- [x] 環境變數驗證 - 驗證環境變數名稱格式
- [x] 批量操作 - 支援批量刪除、匯出等操作

### 4. 系統監控
**優先級：** 中

**功能描述：**
- 監控系統運行狀態
- 顯示腳本執行記錄
- 提供系統資源使用資訊

**具體需求：**
- [x] 系統狀態 - CPU、記憶體使用率
- [x] 活動腳本 - 當前運行中的腳本數量
- [ ] 執行記錄 - 腳本執行歷史記錄
- [ ] 錯誤日誌 - 系統和腳本錯誤記錄
- [ ] 性能指標 - 系統運行時間、回應時間等

### 5. 編輯器整合（未來功能）
**優先級：** 低

**功能描述：**
- 支援在外部編輯器中開啟專案
- 快速開啟特定文件

**具體需求：**
- [ ] 編輯器檢測 - 自動檢測已安裝的編輯器
- [ ] 一鍵開啟 - 在指定編輯器中開啟專案
- [ ] 文件快速開啟 - 快速開啟配置文件等

## 非功能性需求

### 性能需求
- API 回應時間 < 200ms（90% 的請求）
- 支援同時管理 100+ 個儲存庫
- 支援同時執行 20+ 個腳本

### 安全需求
- 敏感環境變數加密存儲
- 防止腳本注入攻擊
- 輸入驗證和清理

### 可用性需求
- 系統可用性 >= 99%
- 優雅的錯誤處理和用戶反饋
- 操作日誌記錄

### 相容性需求
- 支援 macOS、Windows、Linux
- 支援 Node.js 18+
- 支援主流包管理器（npm、pnpm、yarn、bun）

## 技術架構

### 後端技術棧
- **運行時：** Bun
- **框架：** Express.js
- **驗證：** Zod
- **語言：** TypeScript
- **架構：** RESTful API

### 前端技術棧
- **框架：** React + TypeScript
- **路由：** TanStack Router
- **狀態管理：** Jotai
- **UI 組件：** shadcn/ui
- **樣式：** Tailwind CSS

### 資料存儲
- **開發階段：** 記憶體存儲
- **生產階段：** SQLite / PostgreSQL（未來）

## API 設計原則

### RESTful 設計
- 使用標準 HTTP 動詞（GET、POST、PUT、DELETE）
- 語義化的 URL 結構
- 統一的回應格式

### 錯誤處理
- 標準 HTTP 狀態碼
- 詳細的錯誤訊息
- 結構化的錯誤回應

### 驗證機制
- 使用 Zod 進行輸入驗證
- 統一的驗證錯誤格式
- 類型安全的資料處理

## 開發里程碑

### 第一階段（已完成）
- [x] 基礎架構搭建
- [x] 資料模型設計
- [x] 儲存庫管理 API
- [x] 腳本管理 API
- [x] 環境變數管理 API
- [x] 基礎驗證機制

### 第二階段（規劃中）
- [ ] WebSocket 支援（即時日誌）
- [ ] 資料持久化
- [ ] 用戶認證系統
- [ ] 批量操作功能

### 第三階段（長期規劃）
- [ ] 插件系統
- [ ] 多人協作功能
- [ ] 雲端同步
- [ ] 移動端支援

## 風險評估

### 技術風險
- **風險：** 腳本執行安全性問題
- **緩解：** 實施嚴格的輸入驗證和沙箱機制

- **風險：** 大量併發腳本執行導致系統資源耗盡
- **緩解：** 實施腳本執行數量限制和資源監控

### 產品風險
- **風險：** 用戶學習成本過高
- **緩解：** 提供詳細文檔和教學示例

- **風險：** 與現有工具重複
- **緩解：** 聚焦於統一管理和易用性的差異化優勢

## 成功指標

### 技術指標
- API 可用性 >= 99%
- 平均回應時間 < 200ms
- 零重大安全漏洞

### 產品指標
- 用戶留存率 >= 80%
- 功能使用率 >= 60%
- 用戶滿意度 >= 4.5/5

## 附錄

### 參考文檔
- [API 文檔](./API-DOCUMENTATION.md)
- [架構設計文檔](./ARCHITECTURE.md)
- [開發指南](./DEVELOPMENT.md) 